<!DOCTYPE html>
<html lang="bn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medi Point Invoice</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0ea5e9">
    <link rel="apple-touch-icon" href="img/icon-192.png">

    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: '#008542', // The deep blue from your logo/image
                        brandLight: '#e6e7ff', // Light background for table header
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Hind Siliguri', sans-serif;
            color: #32634b;
        }
        /* A4 Paper Settings */
        
        @page {
            size: A4;
            margin: 0;
        }
        /* Watermark Styling */
        
        .watermark-container {
            position: relative;
            z-index: 10;
        }
        
        .watermark-container::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60%;
            height: 60%;
            background-image: url('surgi.png');
            /* Uses your uploaded logo */
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain;
            opacity: 0.10;
            /* Faint watermark */
            z-index: -1;
        }
        /* Dotted Input Style */
        
        .dotted {
            border-bottom: 2px dotted #26ae48;
            outline: none;
            background: transparent;
            width: 100%;
            color: #000;
            font-weight: 600;
        }
        /* Print Specifics */
        
        @media print {
            body {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
            .no-print {
                display: none !important;
            }
            .page-sheet {
                box-shadow: none !important;
                margin: 0 !important;
                width: 210mm !important;
                height: 297mm !important;
            }
            input {
                border: none !important;
                border-bottom: none !important;
                padding: 0 !important;
                margin: 0 !important;
            }
            .dotted {
                border-bottom: none !important;
            }
            /* Force footer to bottom */
            #footer-section {
                position: absolute;
                bottom: 0;
                width: 100%;
                left: 0;
            }
        }
        
        .page-sheet {
            width: 210mm;
            min-height: 297mm;
            background: white;
            margin: 20px auto;
            padding: 10mm 12mm;
            position: relative;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>

<body class="bg-gray-100">

    <div class="no-print fixed top-5 right-5 z-50">
        <button onclick="window.print()" class="bg-brand text-white px-6 py-2 rounded-full font-bold shadow-lg hover:bg-blue-800 transition">
            üñ®Ô∏è Print Invoice
        </button>
    </div>

    <div class="page-sheet flex flex-col justify-between">

        <div>
            <header class="relative mb-6">
                <div class="flex justify-center mb-2">
                    <div class="bg-brand text-white px-8 py-1 font-bold text-xl rounded-sm">‡¶¨‡¶ø‡¶≤</div>
                </div>

                <div class="flex flex-col items-center relative">
                    <div class="absolute left-0 top-0 w-28 md:w-32">
                        <img src="surgi.png" alt="Logo" class="w-full">
                    </div>

                    <div class="text-center w-full pl-20 pr-4">
                        <h1 class="text-3xl font-bold text-brand leading-none mb-1">‡¶Æ‡ßá‡¶°‡¶ø ‡¶™‡ßü‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶æ‡¶∞‡ßç‡¶ú‡¶ø‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏‡¶ø‡¶Ç ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞</h1>
                        <h2 class="text-2xl font-bold text-brand uppercase tracking-wide">MEDI POINT SURGICAL SERVICING CENTER</h2>
                        <p class="text-sm font-semibold text-brand">(Medical Equipement System)</p>
                        <p class="text-lg font-medium mt-1">‡¶¨‡ßá‡ßú‡¶ø‡¶¨‡¶æ‡¶Å‡¶ß ‡¶∞‡ßã‡¶°, ‡¶¨‡ßã‡¶ü ‡¶ò‡¶æ‡¶ü, ‡¶ï‡¶æ‡¶ü‡¶æ‡¶∏‡ßÅ‡¶∞, ‡¶Æ‡ßã‡¶π‡¶æ‡¶Æ‡ßç‡¶Æ‡¶¶‡¶™‡ßÅ‡¶∞, ‡¶¢‡¶æ‡¶ï‡¶æ-1207</p>

                        <div class="flex justify-center items-center gap-2 text-sm font-bold mt-1 flex-wrap">
                            <span class="flex items-center gap-1">
                                <span class="bg-pink-600 text-white px-1 text-xs rounded">bkash</span>
                            <span class="bg-orange-500 text-white px-1 text-xs rounded">Nagad</span>
                            <span>01726-029655,01688-137772</span>
                            </span>
                        </div>
                        <div class="text-xs mt-1 font-medium">
                            E-mail: medipoint655@gmail.com
                        </div>
                    </div>
                </div>
            </header>

            <div class="flex justify-between items-end mb-2">
                <div class="flex w-1/2 items-end">
                    <span class="font-bold whitespace-nowrap mr-2 text-brand">‡¶¨‡¶ø‡¶≤ ‡¶®‡¶Ç :</span>
                    <input type="text" value="2026001" class="dotted text-left">
                </div>
                <div class="flex w-1/3 items-end justify-end">
                    <span class="font-bold whitespace-nowrap mr-2 text-brand">‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ :</span>
                    <input type="text" id="date-box" class="dotted text-right">
                </div>
            </div>

            <div class="mb-6 space-y-2">
                <div class="flex items-end">
                    <span class="font-bold whitespace-nowrap mr-2 text-brand w-12">‡¶®‡¶æ‡¶Æ :</span>
                    <input type="text" class="dotted">
                </div>
                <div class="flex items-end">
                    <span class="font-bold whitespace-nowrap mr-2 text-brand w-12">‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ :</span>
                    <input type="text" class="dotted">
                </div>
            </div>

            <div class="watermark-container min-h-[400px]">
                <table class="w-full border-2 border-brand text-sm md:text-base">
                    <thead>
                        <tr class="bg-brandLight text-brand text-center font-bold border-b-2 border-brand">
                            <th class="border-r-2 border-brand p-2 w-[55%]">‡¶™‡¶£‡ßç‡¶Ø‡ßá‡¶∞ ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£</th>
                            <th class="border-r-2 border-brand p-2 w-[15%]">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
                            <th class="border-r-2 border-brand p-2 w-[15%]">‡¶¶‡¶∞</th>
                            <th class="p-2 w-[15%]">‡¶ü‡¶æ‡¶ï‡¶æ</th>
                        </tr>
                    </thead>
                    <tbody id="invoice-body">
                    </tbody>
                </table>
            </div>
            <div class="flex justify-end mt-0">
                <div class="w-[30%] flex border-2 border-t-0 border-brand">
                    <div class="w-1/2 p-1 font-bold text-center border-r-2 border-brand bg-brandLight">‡¶Æ‡ßã‡¶ü</div>
                    <div class="w-1/2 p-1 text-right font-bold pr-2"><span id="total-amount">0.00</span></div>
                </div>
            </div>
        </div>

        <div id="footer-section" class="pb-0">
            <div class="mb-12 px-10">
                <div class="flex items-end">
                    <span class="font-bold whitespace-nowrap mr-2">‡¶ü‡¶æ‡¶ï‡¶æ (‡¶ï‡¶•‡¶æ‡ßü) :</span>
                    <span id="words-output" class="dotted italic text-black">‡¶∂‡ßÇ‡¶®‡ßç‡¶Ø ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞</span>
                </div>
            </div>

            <div class="flex justify-between px-4 mb-6 font-bold text-lg">
                <div class="text-center">
                    <div class="border-t-2 border-brand w-40 pt-1">‡¶ï‡ßç‡¶∞‡ßá‡¶§‡¶æ‡¶∞ ‡¶∏‡ßç‡¶¨‡¶æ‡¶ï‡ßç‡¶∑‡¶∞</div>
                </div>
                <div class="text-center">
                    <div class="border-t-2 border-brand w-40 pt-1">‡¶¨‡¶ø‡¶ï‡ßç‡¶∞‡ßá‡¶§‡¶æ‡¶∞ ‡¶∏‡ßç‡¶¨‡¶æ‡¶ï‡ßç‡¶∑‡¶∞</div>
                </div>
            </div>

            <div class="bg-brand text-white text-center py-2 text-sm font-medium">
                ‡¶Ø‡¶¶‡¶ø ‡¶Æ‡ßá‡¶∞‡¶æ‡¶Æ‡¶§‡¶ï‡ßÉ‡¶§ ‡¶Æ‡ßá‡¶∂‡¶ø‡¶® ‡¶¶‡ßÅ‡¶á ‡¶Æ‡¶æ‡¶∏‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶®‡¶æ ‡¶®‡ßá‡¶ì‡ßü‡¶æ ‡¶π‡ßü ‡¶§‡¶¨‡ßá ‡¶ï‡¶∞‡ßç‡¶§‡ßÉ‡¶™‡¶ï‡ßç‡¶∑ ‡¶∏‡ßá ‡¶Æ‡ßá‡¶∂‡¶ø‡¶®‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶¶‡¶æ‡ßü‡¶¨‡¶¶‡ßç‡¶ß ‡¶•‡¶æ‡¶ï‡¶ø‡¶¨‡ßá ‡¶®‡¶æ ‡•§
            </div>
        </div>
    </div>

    <script>
        // Set Bangla Date
        const dateObj = new Date();
        const enDate = `${dateObj.getDate()}.${dateObj.getMonth()+1}.${dateObj.getFullYear()}`;
        const bnDigits = {
            '0': '‡ß¶',
            '1': '‡ßß',
            '2': '‡ß®',
            '3': '‡ß©',
            '4': '‡ß™',
            '5': '‡ß´',
            '6': '‡ß¨',
            '7': '‡ß≠',
            '8': '‡ßÆ',
            '9': '‡ßØ'
        };
        document.getElementById('date-box').value = enDate.replace(/\d/g, d => bnDigits[d]);

        // Generate Rows
        const tbody = document.getElementById('invoice-body');
        for (let i = 0; i < 15; i++) {
            const tr = document.createElement('tr');
            tr.className = "h-8 border-b border-brand border-opacity-30";
            tr.innerHTML = `
                <td class="border-r-2 border-brand p-0 relative"><input class="w-full h-full bg-transparent px-2 outline-none" type="text"></td>
                <td class="border-r-2 border-brand p-0 relative"><input class="w-full h-full bg-transparent text-center outline-none qty" type="number" oninput="calc()"></td>
                <td class="border-r-2 border-brand p-0 relative"><input class="w-full h-full bg-transparent text-right px-2 outline-none rate" type="number" oninput="calc()"></td>
                <td class="p-1 text-right relative"><span class="row-total mr-1"></span></td>
            `;
            tbody.appendChild(tr);
        }

        // Calculation Logic
        function calc() {
            let grandTotal = 0;
            document.querySelectorAll('tbody tr').forEach(row => {
                const q = parseFloat(row.querySelector('.qty').value) || 0;
                const r = parseFloat(row.querySelector('.rate').value) || 0;
                const total = q * r;
                row.querySelector('.row-total').innerText = total > 0 ? total.toFixed(2) : '';
                grandTotal += total;
            });
            document.getElementById('total-amount').innerText = grandTotal.toFixed(2);

            // Only convert if total > 0
            if (grandTotal > 0) {
                document.getElementById('words-output').innerText = convertToBangla(Math.round(grandTotal)) + " ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞";
            } else {
                document.getElementById('words-output').innerText = "‡¶∂‡ßÇ‡¶®‡ßç‡¶Ø ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞";
            }
        }

        // --- FIXED: Full Bangla Number to Words Logic ---
        function convertToBangla(number) {
            const words = ["", "‡¶è‡¶ï", "‡¶¶‡ßÅ‡¶á", "‡¶§‡¶ø‡¶®", "‡¶ö‡¶æ‡¶∞", "‡¶™‡¶æ‡¶Å‡¶ö", "‡¶õ‡¶Ø‡¶º", "‡¶∏‡¶æ‡¶§", "‡¶Ü‡¶ü", "‡¶®‡¶Ø‡¶º", "‡¶¶‡¶∂",
                "‡¶è‡¶ó‡¶æ‡¶∞‡ßã", "‡¶¨‡¶æ‡¶∞‡ßã", "‡¶§‡ßá‡¶∞‡ßã", "‡¶ö‡ßå‡¶¶‡ßç‡¶¶", "‡¶™‡¶®‡ßá‡¶∞‡ßã", "‡¶∑‡ßã‡¶≤", "‡¶∏‡¶§‡ßá‡¶∞‡ßã", "‡¶Ü‡¶†‡¶æ‡¶∞‡ßã", "‡¶ä‡¶®‡¶ø‡¶∂", "‡¶¨‡¶ø‡¶∂",
                "‡¶è‡¶ï‡ßÅ‡¶∂", "‡¶¨‡¶æ‡¶á‡¶∂", "‡¶§‡ßá‡¶á‡¶∂", "‡¶ö‡¶¨‡ßç‡¶¨‡¶ø‡¶∂", "‡¶™‡¶Å‡¶ö‡¶ø‡¶∂", "‡¶õ‡¶æ‡¶¨‡ßç‡¶¨‡¶ø‡¶∂", "‡¶∏‡¶æ‡¶§‡¶æ‡¶∂", "‡¶Ü‡¶†‡¶æ‡¶∂", "‡¶ä‡¶®‡¶§‡ßç‡¶∞‡¶ø‡¶∂", "‡¶§‡ßç‡¶∞‡¶ø‡¶∂",
                "‡¶è‡¶ï‡¶§‡ßç‡¶∞‡¶ø‡¶∂", "‡¶¨‡¶§‡ßç‡¶∞‡¶ø‡¶∂", "‡¶§‡ßá‡¶§‡ßç‡¶∞‡¶ø‡¶∂", "‡¶ö‡ßå‡¶§‡ßç‡¶∞‡¶ø‡¶∂", "‡¶™‡¶Å‡¶Ø‡¶º‡¶§‡ßç‡¶∞‡¶ø‡¶∂", "‡¶õ‡¶§‡ßç‡¶∞‡¶ø‡¶∂", "‡¶∏‡¶æ‡¶á‡¶§‡ßç‡¶∞‡¶ø‡¶∂", "‡¶Ü‡¶ü‡¶§‡ßç‡¶∞‡¶ø‡¶∂", "‡¶ä‡¶®‡¶ö‡¶≤‡ßç‡¶≤‡¶ø‡¶∂", "‡¶ö‡¶≤‡ßç‡¶≤‡¶ø‡¶∂",
                "‡¶è‡¶ï‡¶ö‡¶≤‡ßç‡¶≤‡¶ø‡¶∂", "‡¶¨‡¶ø‡¶Ø‡¶º‡¶æ‡¶≤‡ßç‡¶≤‡¶ø‡¶∂", "‡¶§‡ßá‡¶§‡¶æ‡¶≤‡ßç‡¶≤‡¶ø‡¶∂", "‡¶ö‡ßÅ‡¶Ø‡¶º‡¶æ‡¶≤‡ßç‡¶≤‡¶ø‡¶∂", "‡¶™‡¶Å‡¶Ø‡¶º‡¶§‡¶æ‡¶≤‡ßç‡¶≤‡¶ø‡¶∂", "‡¶õ‡ßá‡¶ö‡¶≤‡ßç‡¶≤‡¶ø‡¶∂", "‡¶∏‡¶æ‡¶§‡¶ö‡¶≤‡ßç‡¶≤‡¶ø‡¶∂", "‡¶Ü‡¶ü‡¶ö‡¶≤‡ßç‡¶≤‡¶ø‡¶∂", "‡¶ä‡¶®‡¶™‡¶û‡ßç‡¶ö‡¶æ‡¶∂", "‡¶™‡¶û‡ßç‡¶ö‡¶æ‡¶∂",
                "‡¶è‡¶ï‡¶æ‡¶®‡ßç‡¶®", "‡¶¨‡¶æ‡¶Ø‡¶º‡¶æ‡¶®‡ßç‡¶®", "‡¶§‡¶ø‡¶™‡ßç‡¶™‡¶æ‡¶®‡ßç‡¶®", "‡¶ö‡ßÅ‡¶Ø‡¶º‡¶æ‡¶®‡ßç‡¶®", "‡¶™‡¶û‡ßç‡¶ö‡¶æ‡¶®‡ßç‡¶®", "‡¶õ‡¶æ‡¶™‡ßç‡¶™‡¶æ‡¶®‡ßç‡¶®", "‡¶∏‡¶æ‡¶§‡¶æ‡¶®‡ßç‡¶®", "‡¶Ü‡¶ü‡¶æ‡¶®‡ßç‡¶®", "‡¶ä‡¶®‡¶∑‡¶æ‡¶ü", "‡¶∑‡¶æ‡¶ü",
                "‡¶è‡¶ï‡¶∑‡¶ü‡ßç‡¶ü‡¶ø", "‡¶¨‡¶æ‡¶∑‡¶ü‡ßç‡¶ü‡¶ø", "‡¶§‡ßá‡¶∑‡¶ü‡ßç‡¶ü‡¶ø", "‡¶ö‡ßå‡¶∑‡¶ü‡ßç‡¶ü‡¶ø", "‡¶™‡¶Å‡¶Ø‡¶º‡¶∑‡¶ü‡ßç‡¶ü‡¶ø", "‡¶õ‡ßá‡¶∑‡¶ü‡ßç‡¶ü‡¶ø", "‡¶∏‡¶æ‡¶§‡¶∑‡¶ü‡ßç‡¶ü‡¶ø", "‡¶Ü‡¶ü‡¶∑‡¶ü‡ßç‡¶ü‡¶ø", "‡¶ä‡¶®‡¶∏‡¶§‡ßç‡¶§‡¶∞", "‡¶∏‡¶§‡ßç‡¶§‡¶∞",
                "‡¶è‡¶ï‡¶æ‡¶§‡ßç‡¶§‡¶∞", "‡¶¨‡¶æ‡¶π‡¶æ‡¶§‡ßç‡¶§‡¶∞", "‡¶§‡ßá‡¶π‡¶æ‡¶§‡ßç‡¶§‡¶∞", "‡¶ö‡ßå‡¶π‡¶æ‡¶§‡ßç‡¶§‡¶∞", "‡¶™‡¶Å‡¶ö‡¶æ‡¶§‡ßç‡¶§‡¶∞", "‡¶õ‡¶ø‡¶Ø‡¶º‡¶æ‡¶§‡ßç‡¶§‡¶∞", "‡¶∏‡¶æ‡¶§‡¶æ‡¶§‡ßç‡¶§‡¶∞", "‡¶Ü‡¶ü‡¶æ‡¶§‡ßç‡¶§‡¶∞", "‡¶ä‡¶®‡¶Ü‡¶∂‡¶ø", "‡¶Ü‡¶∂‡¶ø",
                "‡¶è‡¶ï‡¶æ‡¶∂‡¶ø", "‡¶¨‡¶ø‡¶∞‡¶æ‡¶∂‡¶ø", "‡¶§‡¶ø‡¶∞‡¶æ‡¶∂‡¶ø", "‡¶ö‡ßÅ‡¶∞‡¶æ‡¶∂‡¶ø", "‡¶™‡¶Å‡¶ö‡¶æ‡¶∂‡¶ø", "‡¶õ‡¶ø‡¶Ø‡¶º‡¶æ‡¶∂‡¶ø", "‡¶∏‡¶æ‡¶§‡¶æ‡¶∂‡¶ø", "‡¶Ü‡¶ü‡¶æ‡¶∂‡¶ø", "‡¶ä‡¶®‡¶®‡¶¨‡ßç‡¶¨‡¶á", "‡¶®‡¶¨‡ßç‡¶¨‡¶á",
                "‡¶è‡¶ï‡¶æ‡¶®‡¶¨‡ßç‡¶¨‡¶á", "‡¶¨‡¶ø‡¶∞‡¶æ‡¶®‡¶¨‡ßç‡¶¨‡¶á", "‡¶§‡¶ø‡¶∞‡¶æ‡¶®‡¶¨‡ßç‡¶¨‡¶á", "‡¶ö‡ßÅ‡¶∞‡¶æ‡¶®‡¶¨‡ßç‡¶¨‡¶á", "‡¶™‡¶Å‡¶ö‡¶æ‡¶®‡¶¨‡ßç‡¶¨‡¶á", "‡¶õ‡¶ø‡¶Ø‡¶º‡¶æ‡¶®‡¶¨‡ßç‡¶¨‡¶á", "‡¶∏‡¶æ‡¶§‡¶æ‡¶®‡¶¨‡ßç‡¶¨‡¶á", "‡¶Ü‡¶ü‡¶æ‡¶®‡¶¨‡ßç‡¶¨‡¶á", "‡¶®‡¶ø‡¶∞‡¶æ‡¶®‡¶¨‡ßç‡¶¨‡¶á"
            ];

            function getWord(n) {
                if (n < 100) return words[n];
                return "";
            }

            let str = "";

            // Crores (Koti)
            if (Math.floor(number / 10000000) > 0) {
                str += getWord(Math.floor(number / 10000000)) + " ‡¶ï‡ßã‡¶ü‡¶ø ";
                number %= 10000000;
            }
            // Lakhs (Lokkho)
            if (Math.floor(number / 100000) > 0) {
                str += getWord(Math.floor(number / 100000)) + " ‡¶≤‡¶ï‡ßç‡¶∑ ";
                number %= 100000;
            }
            // Thousands (Hajar)
            if (Math.floor(number / 1000) > 0) {
                str += getWord(Math.floor(number / 1000)) + " ‡¶π‡¶æ‡¶ú‡¶æ‡¶∞ ";
                number %= 1000;
            }
            // Hundreds (Shot)
            if (Math.floor(number / 100) > 0) {
                str += getWord(Math.floor(number / 100)) + " ‡¶∂‡¶§ ";
                number %= 100;
            }
            // Remainder
            if (number > 0) {
                str += getWord(number);
            }

            return str.trim();
        }
    </script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(reg => console.log('SW Registered!', reg.scope))
                    .catch(err => console.log('SW Failed:', err));
            });
        }
    </script>
</body>

</html>